-- run from unison root directory
-- curl -H "Content-Type: text/plain; charset=UTF-8" --data-binary @node/tests/pingpong.u http://localhost:8081/compute/dummynode909

Remote {
  n1 := Remote.spawn;
  n2 := Remote.spawn;
  let rec
    ping n = Remote { 
      n := Remote.at n1 (n + 1); 
      if (n >= 5) (pure n) (pong n); 
    };
    pong n = Remote { n := Remote.at n1 (n + 1); ping n; }
  in ping 0;
}
